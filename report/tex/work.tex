\section{Work performed}

\subsection{Implementation choices}

\subsection{How to use the project}

To be able to use the project you have to have :
\begin{itemize}
    \item arm-none-eabi-binutils
    \item gprbuild
    \item The GNAT 2018-arm-elf toolchain
\end{itemize}

\begin{noindent}
The project can be downloaded at this address : \\
\url{https://github.com/St0rmingBr4in/ada_stm32}
\end{noindent}

\newpage

\subsubsection{Implementation of a random \sq generator}

In order to generate \sqs we chose to use the STM32 Library.
Indeed, the library helps generate random number by utilizing the RTC on the \stmdb.

\paragraph{Code}

\noindent
First we include STM32.RNG.Interrupts.
\begin{lstlisting}
   with STM32.RNG.Interrupts; use STM32;
\end{lstlisting}


\noindent
Then we initialize the random number generator using this statement:
\begin{lstlisting}
   RNG.Interrupts.Initialize_RNG;
\end{lstlisting}


\noindent
Finally we can generate our random \sqs like this:


\lstinputlisting[numbers=left,firstline=52, lastline=56]{../src/square_destroyer.adb}

\newpage

\subsubsection{Implementation of Is$\_$Move$\_$Legal}

This procedure verifies that a move is legal. (i.e.\  the move generates a combination of at least 3 \sqs)

\paragraph{Code}
\noindent
\begin{centering}
\lstinputlisting[numbers=left,firstline=156, lastline=179]{../src/square_destroyer.adb}
\end{centering}
\newpage

The Is$\_$Move$\_$Legal procedure uses the helper procedure Get$\_$Matching$\_$Neighbourgs which helps in getting all the adjacent \sqs of the same color.

\paragraph{Code}
\noindent
\begin{centering}
\lstinputlisting[numbers=left,firstline=135, lastline=154]{../src/square_destroyer.adb}
\end{centering}
\newpage

\subsubsection{Implementation of Draw$\_$Grid}

This procedure draws the \grid onto the screen of the \stmdb.

\paragraph{Code}
\noindent
\begin{centering}
\lstinputlisting[numbers=left,firstline=351, lastline=370]{../src/square_destroyer.adb}
\end{centering}
\newpage

\subsubsection{Implementation of Run}

This procedure is the main game loop.

\paragraph{Code}
\begin{centering}
\lstinputlisting[numbers=left,firstline=374, lastline=415]{../src/square_destroyer.adb}
\end{centering}
\newpage
